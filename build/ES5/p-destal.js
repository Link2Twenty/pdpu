import{PDX}from"./p-d-x.js";export var PDestal=function(_PDX){babelHelpers.inherits(PDestal,_PDX);function PDestal(){var _this;babelHelpers.classCallCheck(this,PDestal);_this=babelHelpers.possibleConstructorReturn(this,(PDestal.__proto__||Object.getPrototypeOf(PDestal)).apply(this,arguments));_this._previousValues={};return _this}babelHelpers.createClass(PDestal,[{key:"getPreviousSib",value:function getPreviousSib(){var parent=this;while(parent=parent.parentNode){if(11===parent.nodeType){return parent.host}else if(-1<parent.tagName.indexOf("-")){return parent}else if("HTML"===parent.tagName){this.watchLocation();return null}}this._useLocation}},{key:"doFakeEvent",value:function doFakeEvent(){var _this2=this,split=this._on.split(","),searchParams=new URLSearchParams(location.search),changedVal=!1;split.forEach(function(param){var trimmedParam=param.substr(1,param.length-2),searchParm=searchParams.get(trimmedParam);if(!changedVal&&searchParm!==_this2._previousValues[trimmedParam]){changedVal=!0}_this2._previousValues[trimmedParam]=searchParm});if(changedVal){var fakeEvent={target:this._previousValues};this._handleEvent(fakeEvent)}}},{key:"watchLocation",value:function watchLocation(){var _this3=this;window.addEventListener("popstate",function(){_this3.doFakeEvent()});this.doFakeEvent()}}],[{key:"is",get:function get(){return"p-destal"}}]);return PDestal}(PDX);if(!customElements.get(PDestal.is))customElements.define(PDestal.is,PDestal);