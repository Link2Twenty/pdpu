import{P}from"./p.js";import{define}from"./node_modules/xtal-latx/define.js";import{PDNavDown}from"./PDNavDown.js";const m="m";export class PD extends P{constructor(){super(...arguments);this._pdNavDown=[];this._m=1/0}static get is(){return"p-d"}get m(){return this._m}set m(val){this.attr(m,val.toString())}static get observedAttributes(){return super.observedAttributes.concat([m])}pass(e){this._lastEvent=e;this.attr("pds","\uD83C\uDF29\uFE0F");this._pdNavDown.forEach(pdnd=>{this.applyProps(pdnd)});this.attr("pds","\uD83D\uDC42")}applyProps(pd){pd.getMatches().forEach(el=>{this._cssPropMap.filter(map=>map.cssSelector===pd.match).forEach(map=>{this.setVal(this._lastEvent,el,map)})})}attributeChangedCallback(name,oldVal,newVal){switch(name){case m:if(null!==newVal){this._m=parseInt(newVal)}}super.attributeChangedCallback(name,oldVal,newVal);this.onPropsChange()}connectedCallback(){super.connectedCallback();this._upgradeProperties([m]);this._connected=!0;this.attr("pds","\uD83D\uDCDE");const bndApply=this.applyProps.bind(this);this._cssPropMap.forEach(pm=>{const pdnd=new PDNavDown(this,pm.cssSelector,nd=>bndApply(nd),this.m);pdnd.root=this;pdnd.init();this._pdNavDown.push(pdnd)});this.onPropsChange()}}define(PD);